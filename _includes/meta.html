{% assign title = site.title %}
{% if page.class == "home" -%}
  {% assign title = page.title %}
{% else %}
  {% assign title = page.title | append: ' | ' | append: title %}
{% endif %}

{% assign desc = page.description | default: site.description %}

{% assign meta_image_files = site.static_files | where: "image", true %}
{% for file in meta_image_files %}
  {% if file.name == site.meta.og.image %}
    {% assign og-image = file.path %}
  {% endif %}
  {% if file.name == site.meta.twitter.image%}
    {% assign twitter-image = file.path %}
  {% endif %}
{% endfor %}

{% assign favicon_image_files = site.static_files | where: "image", true %}

<head>
  <!-- Basic Page Needs
    ================================================== -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="robots" content="noindex, nofollow">
  <!-- Mobile Specific Metas
    ================================================== -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Title and meta description
    ================================================== -->
  <title>{{title}}</title>
  <meta property="og:title" content="{{title}}">
  <meta name="description" content="{{desc}}">
  <meta property="og:description" content="{{desc}}">
  <meta property="og:image" content="{{site.baseurl}}{{og-image}}">

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@{{site.meta.twitter.handle}}" />
  <meta name="twitter:title" content="{{title}}" />
  <meta name="twitter:description" content="{{desc}}"/>
  <meta property="twitter:image:src" content="{{site.baseurl}}{{twitter-image}}">

  <meta property="og:type" content="article">
  <link rel="canonical" href="{{site.baseurl}}{{ page.url | absolute_url }}" />
  <meta property="og:url" content="{{site.baseurl}}{{ page.url | absolute_url }}" />
  <!-- Favicons
    ================================================== -->
  {% for icon in site.data.favicons %}

     {% for file in favicon_image_files %}
      {% if file.name == icon.name %}
        {% assign path = file.path %}
      {% endif %}
     {% endfor %}

    <link rel="{{ icon.rel | default: 'icon' }}" type="{{ icon.type }}"
      {% if icon.sizes -%}sizes="{{ icon.sizes }}"
      {% endif %}href="{{ path | relative_url }}">

  {% endfor %}
  <!-- CSS
    ================================================== -->
  {% asset index.scss %}
</head>
